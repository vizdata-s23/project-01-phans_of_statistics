---
title: "Eurovision Data Analysis"
subtitle: "STA/ISS 313 - Spring 2023 - Project 1"
author: "PHANs of Statistics"
title-slide-attributes:
  data-background-image: images/watercolour_sys02_img34_teacup-ocean.jpg
  data-background-size: stretch
  data-slide-number: none
format: revealjs
editor: visual
execute:
  echo: false
---

```{r}
#| label: load-packages
#| include: false

# Add any additional packages you need to this chunk
# Remove any packages from this list that you're not using
library(tidyverse)
library(tidymodels)
library(palmerpenguins)
library(gt)
library(dplyr)
library(ggplot2)
library(ggridges)
```

```{r}
#| label: setup
#| include: false

# For better figure resolution
knitr::opts_chunk$set(
  fig.retina = 3, 
  dpi = 300, 
  fig.width = 6, 
  fig.asp = 0.618, 
  out.width = "70%"
  )
```

```{r}
#| label: load-data
#| include: false

# Load your data here
eurovision <- read.csv("data/eurovision.csv")

eurovision_filt <- eurovision |>
  filter(year != "2020") |>
  mutate(era = case_when(year %in% 1956:1979 ~ "1956-1979",
                            year %in% 1980:1999 ~ "1980-1999",
                            year %in% 2000:2010 ~ "2000-2010",
                            year %in% 2011:2022 ~ "2011-2022")) |>
  mutate(from_host_country = case_when(host_country == artist_country ~ "yes",
                                       host_country != artist_country ~ "no")) |>
  mutate(decade = case_when(year %in% 1950:1959 ~ "1950s",
                            year %in% 1960:1969 ~ "1960s",
                            year %in% 1970:1979 ~ "1970s",
                            year %in% 1980:1989 ~ "1980s",
                            year %in% 1990:1999 ~ "1990s", 
                            year %in% 2000:2009 ~ "2000s", 
                            year %in% 2010:2019 ~ "2010s", 
                            year %in% 2020:2022 ~ "2020s"))
```

# Eurovision Dataset

## Relevant Variables

-   Explanation

## Abstract

Information

## Code

```{r}
#| label: boring-regression

# a boring regression
model <- lm(dist ~ speed, data = cars)
tidy(model)
glance(model)
```

## Plots

```{r}
#| label: recode-species
#| echo: false

# In this chunk I'm doing a bunch of analysis that I don't want to present 
# in my slides. But I need the resulting data frame for a plot I want to present.

penguins_modified <- penguins %>%
  mutate(species = fct_other(species, keep = "Adelie"))
```

```{r}
#| label: plot-penguins
#| echo: false
#| warning: false
#| fig-alt: |
#|   Data wrangling for setting up plots
eurovision |>
  count(year) |>
  ggplot(aes(x = year, y = n)) +
  geom_bar(stat = "identity") +
  labs(x = "Year",
       y = "Number of participating countries", color = "Decade", 
       title = "More countries have joined Eurovision over time")

eurovision_filt |>
  count(era, sort = TRUE)

eurovision_filt |>
  count(from_host_country, rank, sort = TRUE)
```

## Host Country Vs. Non-Host Country

::: columns
::: {.column width="50%"}
-   We want to compare the distributions of normalized points/rankings between host country participants and non-host country participants
:::

::: {.column width="50%"}
```{r}
#| warning: false
#| out-width: "100%"
#| fig-width: 4
#| echo: false

# plot
ggplot(eurovision_filt, aes(x = total_points, fill = from_host_country)) +
  geom_density(alpha = 0.5, linewidth = 1.2) +
  labs(title = "Distribution of Total Points by from_host_country", x = "Total Points", y = "Density") +
  scale_fill_manual(values = c("#f47b6e", "#6baed6"), name = "From Host Country")
```
:::
:::

# A new section...

## Tables

If you want to generate a table, make sure it is in the HTML format (instead of Markdown or other formats), e.g.,

```{r}
#| label: penguins-table

gt(head(penguins))
```

## Images

![Image credit: Danielle Navarro, Percolate.](images/watercolour_sys02_img34_teacup-ocean.png)

## Math Expressions {.smaller}

You can write LaTeX math expressions inside a pair of dollar signs, e.g. \$\alpha+\beta\$ renders $\alpha+\beta$. You can use the display style with double dollar signs:

    $$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$

$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$

Limitations:

1.  The source code of a LaTeX math expression must be in one line, unless it is inside a pair of double dollar signs, in which case the starting `$$` must appear in the very beginning of a line, followed immediately by a non-space character, and the ending `$$` must be at the end of a line, led by a non-space character;

2.  There should not be spaces after the opening `$` or before the closing `$`.

# Wrap up

## Feeling adventurous?

-   You are welcomed to use the default styling of the slides. In fact, that's what I expect majority of you will do. You will differentiate yourself with the content of your presentation.

-   But some of you might want to play around with slide styling. Some solutions for this can be found at https://quarto.org/docs/presentations/revealjs.
